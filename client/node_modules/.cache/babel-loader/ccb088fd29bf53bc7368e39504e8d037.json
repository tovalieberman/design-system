{"ast":null,"code":"\"use strict\";\n\nvar findRelation = require(\"./findRelation\");\n\nvar objUtils = require(\"../util/object\");\n\nvar pathUtils = require(\"../util/path\");\n\nfunction absolutize(urlObj, siteUrlObj, options) {\n  findRelation.upToPath(urlObj, siteUrlObj, options); // Fill in relative URLs\n\n  if (urlObj.extra.relation.minimumScheme) urlObj.scheme = siteUrlObj.scheme;\n  if (urlObj.extra.relation.minimumAuth) urlObj.auth = siteUrlObj.auth;\n  if (urlObj.extra.relation.minimumHost) urlObj.host = objUtils.clone(siteUrlObj.host);\n  if (urlObj.extra.relation.minimumPort) copyPort(urlObj, siteUrlObj);\n  if (urlObj.extra.relation.minimumScheme) copyPath(urlObj, siteUrlObj); // Check remaining relativeness now that path has been copied and/or resolved\n\n  findRelation.pathOn(urlObj, siteUrlObj, options); // Fill in relative URLs\n\n  if (urlObj.extra.relation.minimumResource) copyResource(urlObj, siteUrlObj);\n  if (urlObj.extra.relation.minimumQuery) urlObj.query = objUtils.clone(siteUrlObj.query);\n  if (urlObj.extra.relation.minimumHash) urlObj.hash = siteUrlObj.hash;\n}\n/*\n\tGet an absolute path that's relative to site url.\n*/\n\n\nfunction copyPath(urlObj, siteUrlObj) {\n  if (urlObj.extra.relation.maximumHost || !urlObj.extra.hrefInfo.minimumResourceOnly) {\n    var pathArray = urlObj.path.absolute.array;\n    var pathString = \"/\"; // If not erroneous URL\n\n    if (pathArray) {\n      // If is relative path\n      if (urlObj.extra.hrefInfo.minimumPathOnly && urlObj.path.absolute.string.indexOf(\"/\") !== 0) {\n        // Append path to site path\n        pathArray = siteUrlObj.path.absolute.array.concat(pathArray);\n      }\n\n      pathArray = pathUtils.resolveDotSegments(pathArray);\n      pathString += pathUtils.join(pathArray);\n    } else {\n      pathArray = [];\n    }\n\n    urlObj.path.absolute.array = pathArray;\n    urlObj.path.absolute.string = pathString;\n  } else {\n    // Resource-, query- or hash-only or empty\n    urlObj.path = objUtils.clone(siteUrlObj.path);\n  }\n}\n\nfunction copyPort(urlObj, siteUrlObj) {\n  urlObj.port = siteUrlObj.port;\n  urlObj.extra.portIsDefault = siteUrlObj.extra.portIsDefault;\n}\n\nfunction copyResource(urlObj, siteUrlObj) {\n  urlObj.resource = siteUrlObj.resource;\n  urlObj.extra.resourceIsIndex = siteUrlObj.extra.resourceIsIndex;\n}\n\nmodule.exports = absolutize;","map":null,"metadata":{},"sourceType":"script"}